<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Crime by Year</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
      }
      #chart {
        width: 1200px;
        height: 1000px;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <body style="font-family:Verdana, Geneva, Tahoma, sans-serif; background: linear-gradient(rgb(255, 199, 150), rgb(255, 246, 230)); background-repeat: no-repeat; background-attachment: fixed; vertical-align: center;"></body>
   <center><h1>Crimes by Year in Boston</h1></center> 
    <div id="chart"></div>
    <script>
        // Use the generated sample data
const data = [{'crime': 'Assault', 'year': 2020, 'count': 8460}, {'crime': 'Assault', 'year': 2021, 'count': 8535}, {'crime': 'Assault', 'year': 2022, 'count': 8694}, {'crime': 'Drugs/Alcohol', 'year': 2020, 'count': 2246}, {'crime': 'Drugs/Alcohol', 'year': 2021, 'count': 2448}, {'crime': 'Drugs/Alcohol', 'year': 2022, 'count': 2233}, {'crime': 'Firearms/Weapons', 'year': 2020, 'count': 720}, {'crime': 'Firearms/Weapons', 'year': 2021, 'count': 733}, {'crime': 'Firearms/Weapons', 'year': 2022, 'count': 804}, {'crime': 'Homicide', 'year': 2020, 'count': 52}, {'crime': 'Homicide', 'year': 2021, 'count': 31}, {'crime': 'Homicide', 'year': 2022, 'count': 41}, {'crime': 'Kidnap', 'year': 2020, 'count': 6}, {'crime': 'Kidnap', 'year': 2021, 'count': 10}, {'crime': 'Kidnap', 'year': 2022, 'count': 10}, {'crime': 'Misc', 'year': 2020, 'count': 6704}, {'crime': 'Misc', 'year': 2021, 'count': 6498}, {'crime': 'Misc', 'year': 2022, 'count': 7113}, {'crime': 'Motor Vehicle', 'year': 2020, 'count': 8393}, {'crime': 'Motor Vehicle', 'year': 2021, 'count': 9809}, {'crime': 'Motor Vehicle', 'year': 2022, 'count': 9577}, {'crime': 'Property Crime', 'year': 2020, 'count': 2567}, {'crime': 'Property Crime', 'year': 2021, 'count': 2349}, {'crime': 'Property Crime', 'year': 2022, 'count': 2843}, {'crime': 'Public Order', 'year': 2020, 'count': 246}, {'crime': 'Public Order', 'year': 2021, 'count': 193}, {'crime': 'Public Order', 'year': 2022, 'count': 210}, {'crime': 'Theft', 'year': 2020, 'count': 11857}, {'crime': 'Theft', 'year': 2021, 'count': 10177}, {'crime': 'Theft', 'year': 2022, 'count': 10040}]        ;
        
        // Group the data by crime and year
        const groupedData = {};
        data.forEach(({ crime, year, count }) => {
          const key = `${crime}-${year}`;
          if (!groupedData[key]) {
            groupedData[key] = { crime, year, count };
          } else {
            groupedData[key].count += count;
          }
        });
        
        // Define the crimes to plot
        const crimesToPlot = ['Theft', 'Assault', 'Property Crime', 'Motor Vehicle',
       'Firearms/Weapons', 'Misc', 'Drugs/Alcohol', 'Homicide',
       'Public Order', 'Kidnap'];
        
        
        // Convert the grouped data into arrays for plotting
        const years = Array.from(new Set(Object.keys(groupedData).map(key => groupedData[key].year)));
        const counts = crimesToPlot.map(crime => years.map(year => groupedData[`${crime}-${year}`]?.count ?? 0));
        
        // Define the layout and data for the chart
        const layout = {
          barmode: 'group',
          xaxis: { title: 'Year' },
          yaxis: { title: 'Count' },
          hovermode: 'closest',
          hoverlabel: { bgcolor: '#444', font: { color: '#fff' } },
        };
        const chartData = crimesToPlot.map((crime, i) => {
          const colors = [
            { stop: 0, color: '#ffffff' },
            { stop: 0.5, color: `hsl(${i * 30}, 70%, 60%)` },
            { stop: 1, color: `hsl(${i * 30}, 70%, 40%)` },
          ];
        
          return {
            x: years,
            y: counts[i],
            name: crime,
            type: 'bar',
            marker: {
              color: colors.map(({ stop, color }) => `${color} ${stop * 100}%`).join(','),
              opacity: 0.8,
            },
          };
        });
        
        // Create the chart
        Plotly.newPlot('chart', chartData, layout);
        
              // Create the chart
              Plotly.newPlot('chart', chartData, layout);
            </script>
  </body>
</html>